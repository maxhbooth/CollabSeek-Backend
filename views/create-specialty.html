<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Specialty Creation</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.6/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://cdn.jsdelivr.net/npm/gijgo@1.9.6/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script type="text/javascript" src="js/tree-making.js"></script>
    <script type="text/javascript" src="js/create-specialty.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>

<div class="page-header">
    <h2>Edit My Specialties</h2>
</div>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/my-profile">My Profile</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li><a href="/logout">Log Out</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="container-fluid">
    <% var json_tree = []; %>
    <% if (locals.specialty) { %>
    <% for(var i = 0; i < locals.specialty.length; i++){ %>
        <% json_tree.push({id: specialty[i].dataValues.id, parent_id: specialty[i].dataValues.parent_id, text:specialty[i].dataValues.name});%>
    <%}%>
    <%}%>

    <div id="test" style="display:none;"><%=JSON.stringify(json_tree)%></div>
    <div id="test2" style="display:none;"><%=locals.ids%></div>

    <h3>Add and Remove Specialties From Your Profile By Checking The Below</h3>
    <h3><small>Add New Specialties to the List via the Below Options</small></h3>
    <form class="form-inline">
        <label  for="root_specialty">Add New Root Specialty:</label>
        <input type="text" class="form-control" id="root_specialty" name="root_specialty">
        <button id="add_root_specialty" class="btn btn-default" style="display: inline-flex;">Save</button>
    </form>

    <form class="form-inline">
        <label for="other_specialty">Add New Specialty As Subcategory of Selected Specialty:</label>
        <input type="text" class="form-control" id="other_specialty" name="other_specialty">
        <button id="add_other_specialty" class="btn btn-default" style="display: inline-flex;">Save</button>
    </form>

    <label for="specialty_search">Search:</label>
    <select id="specialty_search" name="specialty_search" class="js-example-basic-single js-states form-control" style="width:95%;">
        <% if(locals.specialty){%>
        <%{specialty.forEach(function(spec){%>
        <option><%=spec.dataValues.name%></option>
        <%})}}%>
    </select>

    <button id="expand_all" class="btn btn-default" style="display: inline-flex;">Expand All</button>
    <button id="collapse_all" class="btn btn-default" style="display: inline-flex;">Collapse All</button>
    <button id="expand_mine" class="btn btn-default" style="display: inline-flex;">Expand Mine</button>

    <div id="tree"></div>

</div>


</body>
</html>